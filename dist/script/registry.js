"use strict";!function(n){var e=n("#username"),c=n("#password"),l=n("#repassword"),t=n("#email"),r=n("button"),o=!0,i=!0,s=!0,d=!0,h=!0;e.on("focus",function(){e.next().children(0).html("最长14个英文或7个汉字!"),e.next().children(0).css({color:"#999",display:"block"})}),e.on("blur",function(){""!==n(this).val()?n(this).val().replace(/[\u4e00-\u9fa5]/g,"aa").length<14?n.ajax({type:"post",url:"http://localhost/JS-2002/yinping_project/php/registry.php",data:{username:e.val()}}).done(function(l){o=l?(e.next().children(0).html("用户名已存在"),e.next().children(0).css({color:"red",display:"block"}),!1):(e.next().children(0).html("√"),e.next().children(0).css({color:"green",display:"block"}),!0)}):(e.next().children(0).html("用户名长度不正确"),e.next().children(0).css({color:"red",display:"block"}),o=!1):(e.next().children(0).html("用户名不得为空！"),e.next().children(0).css({color:"red",display:"block"}),o=!1)}),c.on("focus",function(){c.next().children(0).html("长度为6~14个字符,至少包含2种字符"),c.next().children(0).css({color:"#999",display:"block"})}),c.on("blur",function(){i=""!==c.val().trim()?(i&&(c.next().children(0).html("√"),c.next().children(0).css({color:"green",display:"block"})),!0):(c.next().children(0).html("密码不得为空"),c.next().children(0).css({color:"red",display:"block"}),!1)}),c.on("input",function(){var l=n(this).val();if(6<=l.length&&l.length<=14){var e=0;switch(/\d+/.test(l)&&e++,/[A-Z]+/.test(l)&&e++,/[a-z]+/.test(l)&&e++,/[\W\_]+/.test(l)&&e++,e){case 1:c.next().children(0).html("弱"),c.next().children(0).css({color:"red",display:"block"}),i=!1;break;case 2:case 3:c.next().children(0).html("中"),c.next().children(0).css({color:"#ff6600",display:"block"}),i=!0;break;case 4:c.next().children(0).html("强"),c.next().children(0).css({color:"green",display:"block"}),i=!0}}else c.next().children(0).html("密码长度错误"),c.next().children(0).css({color:"red",display:"block"}),i=!1}),l.on("blur",function(){""!==l.val().trim()?(s&&(l.next().children(0).html("√"),l.next().children(0).css({color:"green",display:"block"})),s=!0):(l.next().children(0).html("密码不得为空"),l.next().children(0).css({color:"red",display:"block"}),i=!1),l.val()!=c.val()&&(l.next().children(0).html("两次密码不一致！"),l.next().children(0).css({color:"red",display:"block"}),s=!1)}),t.on("blur",function(){d=""!==t.val().trim()?(d&&(t.next().children(0).html("√"),t.next().children(0).css({color:"green",display:"block"})),!0):(t.next().children(0).html("邮箱不得为空"),t.next().children(0).css({color:"red",display:"block"}),!1);d=/^(\w+[\+\-\.]*\w+)\@(\w+[\-\.]*\w+)\.(\w+[\-\.]*\w+)$/.test(t.val())?(t.next().children(0).html("√"),t.next().children(0).css({color:"green",display:"block"}),!0):(t.next().children(0).html("邮箱格式不正确"),t.next().children(0).css({color:"red",display:"block"}),!1)}),r.on("click",function(){return""===e.val().trim()&&(e.next().children(0).html("用户名不得为空！"),e.next().children(0).css({color:"red",display:"block"}),o=!1),""===c.val().trim()&&(c.next().children(0).html("密码不得为空！"),c.next().children(0).css({color:"red",display:"block"}),i=!1),""===l.val().trim()&&(l.next().children(0).html("确认密码不得为空！"),l.next().children(0).css({color:"red",display:"block"}),s=!1),""===t.val().trim()&&(t.next().children(0).html("邮箱不得为空！"),t.next().children(0).css({color:"red",display:"block"}),d=!1),o&&i&&s&&d&&h&&h&&(n.ajax({type:"post",url:"http://localhost/JS-2002/yinping_project/php/registry.php",data:{username:e.val(),password:c.val(),email:t.val()}}).done(function(){location.href="http://localhost/JS-2002/yinping_project/src/login.html"}),h=!0),!1})}(jQuery);