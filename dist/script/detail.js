"use strict";!function(s){var i=location.search.substring(1).split("=")[1],c=s(".small img"),e=s(".bimg"),a=s(".title"),n=s(".span"),i=i||1;s.ajax({type:"get",url:"http://localhost/JS-2002/yinping_project/php/detail.php",data:{sid:i}}).done(function(i){var t=JSON.parse(i);c.attr("src",t.url),c.attr("sid",t.sid),e.attr("src",t.url),a.html(t.title),n.html(t.price);var l=t.piclisturl.split(","),o="";s.each(l,function(i,t){o+='<li><img src="'+t+'"/></li>'}),s(".list ul").html(o)});var o=s(".small"),r=s(".shade"),t=s(".big"),h=s(".particulars_left"),l=s(".a1"),u=s(".a2");s(".list");r.width(t.width()*c.width()/e.width()),r.height(t.height()*c.height()/e.height());var p=e.width()/c.width();o.hover(function(){r.css("visibility","visible"),t.css("visibility","visible"),s(this).on("mousemove",function(i){var t=(i=i||window.event).pageX-h.offset().left-r.width()/2,l=i.pageY-h.offset().top-r.height()/2;t<0?t=0:t>o.width()-r.width()&&(t=o.width()-r.width()),l<0?l=0:l>o.height()-r.height()&&(l=o.height()-r.height()),r.css({left:t,top:l}),e.css({left:-t*p,top:-l*p})})},function(){r.css("visibility","hidden"),t.css("visibility","hidden")}),s(".list ul").on("click","li",function(){var i=s(this).find("img").attr("src");c.attr("src",i),e.attr("src",i)});var v=4;u.on("click",function(){var i=s(".list ul li");i.size()>v&&(v++,l.css("color","#333"),i.size()==v&&u.css("color","#fff"),s(".list ul").animate({left:-(v-4)*i.eq(0).outerWidth(!0)}))}),l.on("click",function(){var i=s(".list ul li");4<v&&(v--,u.css("color","#333"),v<=4&&l.css("color","#fff"),s(".list ul").animate({left:-(v-4)*i.eq(0).outerWidth(!0)}))});var f=s(".jian"),d=s(".jia01"),g=s(".jia input");f.on("click",function(){var i=g.val();i++,g.val(i)}),d.on("click",function(){var i=g.val();if(0===--i)return!(i=1);g.val(i)}),g.on("input",function(){var i=g.val();/^\d+$/g.test(i)||g.val(1),g.val()<=0&&g.val(1)});var k=[],m=[],w=s(".jia_center button");s(".jia_right button").on("click",function(){location.href="http://localhost/JS-2002/yinping_project/src/cart.html"}),w.on("click",function(){var i,t=c.attr("sid");m=s.cookie("cookiesid")&&s.cookie("cookienum")?(k=s.cookie("cookiesid").split(","),s.cookie("cookienum").split(",")):(k=[],[]),-1!=s.inArray(t,k)?(i=parseInt(m[s.inArray(t,k)])+parseInt(g.val()),m[s.inArray(t,k)]=i):(k.push(t),s.cookie("cookiesid",k,{expires:10,path:"/"}),m.push(g.val())),s.cookie("cookienum",m,{expires:10,path:"/"}),alert("已加入购物车")})}(jQuery);